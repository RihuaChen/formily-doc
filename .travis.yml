language: node_js
node_js:
- '12'
before_install:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- echo $TRAVIS_COMMIT
- echo ${MESSAGE}
install:
- yarn
test: true
script:
- yarn build
# cache: yarn
after_success:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- cd dist
- cp index.html 404.html
- echo GH_TOKEN:$GH_TOKEN
- sed -i "s/GH_TOKEN:\"$GH_TOKEN\"\,/ /g" umi.js
deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GH_TOKEN"
  on:
    branch: main
  repo: RihuaChen/formily-doc
  target_branch: gh-pages
  local_dir: dist
env:
  global:
    secure: QSNGh7N8hyyIhESF6CdmY5mQuQ6Db9TJkZNUIXNDMx7ynCzzkgbQtTGtZ1ujlBZ6QY1XyI1Gf7MjrwVtxb/fZbABRyN/9Nj2toLcdLOOb7h9eGuyHBahXwxFbgH3ET1ZTCCTpDYrkrqcawhgQaxSShGINtzVh/5gPKpfbUT7Q6LLKtGpOrHPmwbyRYiffMhBr1CB1yOm3nnBbruJeGrpChYhNY8o1O6DGGrpk6GHRl0tBb4jkVhvc33ltZxrwgM7lecu+f0IMtQHjBV2y2dyRVon0uwVXSdtB9DFdnNUxvAQl3eCPUhVdOf0PbZYJFdlu6XKdQqWrCLVadvTrIeWDVOONE2fKOMAKKrRhnI6jYcIWv+RPJlm9zXwLQWXF8w/rVdgPIKHhi2XolcQ8zck7HAAweKW2IiCHOGVp7jiVRTZULWgYJx4YMnmLtGftEiVBszBEy3hsZDl02IA48I2W2usPe+Nk2ZVdhSwJhMPA9Enk9BX2dxxMb9uywxR8GMKK9s7l+C98SU/hgpuYxRHPJnpSHW1mhRIbHrxh8rxEIsLw5aZYWd6CsYOOlATt9DL+p89JHC0+opr/AysxH2dlRBG8oDHBace974jbD9RcLBtXyWoJrtO+Uz4qDQ2qh2FdyZf4KQENNLilwKWHWUcjrZY06Yof9ZzeOGiGhRQfKs=